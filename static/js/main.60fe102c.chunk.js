(this.webpackJsonpestimation=this.webpackJsonpestimation||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n.n(a),s=n(15),o=n.n(s),c=(n(21),n(3)),u=n(6),h=n(8),p=n(7),l=n(29),d=n(30),j=n(31);n(22);function O(e,t){return e<t?e/t:t/e}var y=function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Object(c.a)(this,e),this.expression=void 0,this.answer=void 0,this.timelimit=void 0,this.scorer=void 0,this.expression=t,this.answer=n,this.scorer=function(e){return a(e,r.answer)},this.timelimit=i};function v(e,t){return e*Math.pow(2,(r=t,(n=-t)+Math.random()*(r-n)));var n,r}function b(e){for(var t,n,r=e.numOperands,a=e.rangeCenter,i=e.rangeVariance,s=e.operandVariance,o=(t=r.low,n=r.high,t+Math.floor(Math.random()*(n-t+.99999))),c=v(a,i),u=[],h=0;h<o;h++){var p=v(Math.pow(c,1/(o-h)),s);u.push(Math.round(p)),c/=p}u.sort((function(e,t){return e-t})),c=u.reduce((function(e,t){return e*t}));var l="";return u.forEach((function(e){l+="".concat(e," \xd7 ")})),l=l.slice(0,-3),new y(l,c,(function(e,t){var n=e<t?e/t:t/e;return Math.round(100*n)}))}var g,m=n(10),f=n(32),S=n(33);!function(e){e[e.PREGAME=0]="PREGAME",e[e.INTRO=1]="INTRO",e[e.RUNNING=2]="RUNNING",e[e.PAUSED=3]="PAUSED",e[e.OUTRO=4]="OUTRO",e[e.POSTGAME=5]="POSTGAME"}(g||(g={}));var x,N={numOperands:{low:2,high:2},rangeCenter:2e4,rangeVariance:2,operandVariance:2},E=function e(){Object(c.a)(this,e),this.generator=b,this.questionArray=[],this.currentQuestion=void 0,this.category="Multiplication (Easy)",this.numQuestions=5,this.currentIndex=0,this.recentScore=0,this.totalScore=0,this.recentGuess=0,this.recentAnswer=0,this.progressState=g.PREGAME,this.generatorconfig=N};function A(e){e.currentIndex=0,e.recentAnswer=e.recentGuess=e.recentScore=e.totalScore=0,e.questionArray=[];for(var t=0;t<e.numQuestions;t++)e.questionArray.push(e.generator(e.generatorconfig));return e.currentQuestion=e.questionArray[0],e}!function(e){e[e.BUTTON=0]="BUTTON",e[e.ANSWER=1]="ANSWER",e[e.ANIM=2]="ANIM"}(x||(x={}));var T=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).inputField=void 0,r.handleKeyDown=function(e){if("Enter"===e.key&&r.props.gameState.progressState===g.RUNNING){var t;try{t=parseFloat(r.state.text)}catch(n){return}if(isNaN(t))return;r.props.inputHandler({type:x.ANSWER,payload:t}),r.setState({text:""})}else"Enter"===e.key&&r.props.gameState.progressState===g.POSTGAME&&r.props.inputHandler({type:x.BUTTON,payload:"replay"})},r.state={text:""},r.handleChange=r.handleChange.bind(Object(m.a)(r)),r.inputField=i.a.createRef(),r}return Object(u.a)(n,[{key:"render",value:function(){var e,t={background:this.props.theme.background,color:this.props.theme.textColor};this.props.gameState.progressState===g.RUNNING&&(null===(e=this.inputField.current)||void 0===e||e.focus());var n=this.props.gameState.progressState,a="";return n===g.RUNNING?a="Enter Answer":n===g.PAUSED&&(a="Game Paused"),Object(r.jsx)("div",{children:Object(r.jsx)(f.a,{size:"lg",style:t,children:Object(r.jsx)(S.a,{onKeyDown:this.handleKeyDown,style:t,value:this.state.text,onChange:this.handleChange,placeholder:a,ref:this.inputField})})})}},{key:"handleChange",value:function(e){if(this.props.gameState.progressState===g.RUNNING){var t=e.target.value,n=t.slice(-1);(0===t.length||n>="0"&&n<="9"||"e"===n||"-"===n||"+"===n||"."===n)&&this.setState({text:t})}}}]),n}(i.a.Component),w=n(11),k={fontSize:45,textAlign:"center",minHeight:100},G={fontSize:30,textAlign:"center",minHeight:100,padding:15},M=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e,t=this.props.gameState.progressState;return t===g.PAUSED?Object(r.jsx)("div",{style:Object(w.a)(Object(w.a)({},k),{},{fontFamily:this.props.theme.questionFont}),children:"---Paused---"}):t===g.POSTGAME?Object(r.jsx)("div",{style:Object(w.a)(Object(w.a)({},G),{},{fontFamily:this.props.theme.questionFont}),children:"Final Score: ".concat(this.props.gameState.totalScore)}):Object(r.jsx)("div",{style:Object(w.a)(Object(w.a)({},k),{},{fontFamily:this.props.theme.questionFont}),children:(null===(e=this.props.question)||void 0===e?void 0:e.expression)||"---"})}}]),n}(i.a.Component),U=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.recentGuess,n=e.recentAnswer,a="",i=Math.abs(Math.log10(n)-Math.log10(t));i=Math.pow(10,i),isNaN(i)&&(i=1),i<1.5?a="Error: ".concat((i=100*(i-1)).toFixed(2)," %"):(i=Math.log10(i),a="Error (log\u2081\u2080): ".concat(i.toFixed(2)));var s=window.innerWidth<576?{}:{float:"right"};return Object(r.jsx)("div",{children:Object(r.jsx)(l.a,{children:Object(r.jsxs)(d.a,{children:[Object(r.jsxs)(j.a,{xs:12,sm:4,children:[Object(r.jsx)("span",{children:"Score: ".concat(this.props.totalScore," ")}),Object(r.jsx)("span",{children:"(+".concat(this.props.recentScore,")")})]}),Object(r.jsx)(j.a,{xs:12,sm:8,children:Object(r.jsxs)("div",{style:s,children:[Object(r.jsx)("div",{children:"Guess: ".concat(R(t),", Answer: ").concat(R(n))}),Object(r.jsx)("div",{children:a})]})})]})})})}}]),n}(i.a.Component),C="\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079\u207b";function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;if(0!==e&&(e<n||e>t)){for(var r=Math.floor(Math.log10(e)),a=e/Math.pow(10,r),i=r.toString(),s="",o=0;o<i.length;o++)"-"===i[o]?s+=C[10]:s+=C[parseInt(i[o])];return"".concat(a.toFixed(3),"\xd710").concat(s)}return e.toString()}var I=U,F=n(34),P=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.theme,n=e.gameState,a=e.inputHandler,i={fontFamily:t.headerFont,fontSize:"24px",marginTop:"12px"},s="(".concat(n.currentIndex+1,"/").concat(n.numQuestions,")"),o=Object(r.jsx)(F.a,{variant:"success",style:{float:"right",fontFamily:t.bodyFont},onClick:function(){a({type:x.BUTTON,payload:"start"})},children:"Start\u21b5"}),c=Object(r.jsx)(F.a,{variant:"success",style:{float:"right",fontFamily:t.bodyFont},onClick:function(){a({type:x.BUTTON,payload:"replay"})},children:"Replay\u21b5"});return Object(r.jsxs)("div",{style:i,children:[Object(r.jsx)("span",{children:n.category}),n.progressState===g.PREGAME?o:n.progressState===g.POSTGAME?c:Object(r.jsx)("span",{style:{float:"right"},children:s}),Object(r.jsx)("hr",{style:{borderColor:t.textColor}})]})}}]),n}(i.a.Component),B={marginRight:4},H=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).pauseEvent=r.pauseEvent.bind(Object(m.a)(r)),r.resetEvent=r.resetEvent.bind(Object(m.a)(r)),r}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.gameState.progressState,t=e===g.PAUSED,n=[Object(r.jsxs)(F.a,{variant:"primary",style:B,onClick:this.pauseEvent,children:[Object(r.jsx)("u",{children:"P"}),t?"lay":"ause"]},1),Object(r.jsxs)(F.a,{variant:"warning",style:B,onClick:this.resetEvent,children:[Object(r.jsx)("u",{children:"R"}),"eset"]},2)];return Object(r.jsx)("div",{children:e===g.POSTGAME?[]:n})}},{key:"pauseEvent",value:function(){this.props.inputHandler({type:x.BUTTON,payload:"playpause"})}},{key:"resetEvent",value:function(){this.props.inputHandler({type:x.BUTTON,payload:"reset"})}}]),n}(i.a.Component),D=0;var q=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).prevTimestamp=0,r.state={gameState:new E},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.handleInput=this.handleInput.bind(this),this.keyCapture=this.keyCapture.bind(this),document.body.addEventListener("keydown",this.keyCapture)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.keyCapture)}},{key:"render",value:function(){var e=this.state.gameState;return Object(r.jsxs)("div",{children:[Object(r.jsx)(P,{theme:this.props.theme,gameState:e,inputHandler:this.handleInput}),Object(r.jsx)(M,{question:e.currentQuestion,theme:this.props.theme,gameState:e}),Object(r.jsx)(T,{inputHandler:this.handleInput,theme:this.props.theme,gameState:e}),Object(r.jsx)(I,{recentScore:e.recentScore,totalScore:e.totalScore,recentGuess:e.recentGuess,recentAnswer:e.recentAnswer}),Object(r.jsx)(H,{inputHandler:this.handleInput,gameState:e})]})}},{key:"handleInput",value:function(e){var t=Date.now();if(!(t-this.prevTimestamp<=1)){this.prevTimestamp=t;var n=function(e,t){var n=e;if(e.progressState===g.PREGAME)t.type===x.BUTTON&&"start"===t.payload&&((n=A(e)).progressState=g.RUNNING);else if(e.progressState===g.RUNNING){if(t.type===x.BUTTON)"reset"===t.payload?(n=A(e)).progressState=g.RUNNING:"playpause"===t.payload&&(n.progressState=g.PAUSED);else if(t.type===x.ANSWER){var r,a,i=null===(r=e.currentQuestion)||void 0===r?void 0:r.scorer(t.payload);e.totalScore+=i||0,e.recentGuess=t.payload,e.recentAnswer=(null===(a=e.currentQuestion)||void 0===a?void 0:a.answer)||-1,e.recentScore=i||0,e.currentIndex++,e.currentIndex<e.numQuestions?e.currentQuestion=e.questionArray[e.currentIndex]:e.progressState=g.POSTGAME}}else e.progressState===g.PAUSED?t.type===x.BUTTON&&"playpause"===t.payload&&(e.progressState=g.RUNNING):e.progressState===g.POSTGAME&&t.type===x.BUTTON&&"replay"===t.payload&&((n=A(e)).progressState=g.RUNNING);return n}(this.state.gameState,e);this.setState({gameState:n})}}},{key:"keyCapture",value:function(e){var t=function(e,t){if(!(e.timeStamp-D<.1)){D=e.timeStamp;var n={type:x.BUTTON,payload:""};if("KeyR"===e.code)return n.payload="reset",n;if("KeyP"===e.code)return n.payload="playpause",n;if("Enter"===e.code){if(t.progressState===g.PREGAME)return n.payload="start",n;if(t.progressState===g.RUNNING)return}}}(e,this.state.gameState);void 0!==t&&this.handleInput(t)}}]),n}(i.a.Component),Q=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e={background:this.props.theme.primary,width:"100%",textAlign:"center",fontFamily:this.props.theme.headerFont,fontSize:"30px",color:this.props.theme.textColor};return Object(r.jsx)("div",{style:e,children:"The Estimation Game"})}}]),n}(i.a.Component),W=b,z={background:"#222831",primary:"#30475e",secondary:"#ffa41b",textColor:"#eeeeee",questionFont:"Roboto Mono",headerFont:"Concert One",bodyFont:"Noto Sans"},V={numOperands:{low:2,high:2},rangeCenter:2e4,rangeVariance:2,operandVariance:2},K={background:z.background,minHeight:"100vh",color:z.textColor,fontFamily:z.bodyFont},L=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).setState({width:window.innerWidth,height:window.innerHeight}),window.addEventListener("resize",(function(e){r.setState({height:e.currentTarget.innerHeight,width:e.currentTarget.innerWidth})})),r}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{style:K,children:[Object(r.jsx)(Q,{theme:z}),Object(r.jsx)(l.a,{children:Object(r.jsxs)(d.a,{children:[Object(r.jsx)(j.a,{lg:2,md:1,xs:0}),Object(r.jsx)(j.a,{lg:8,md:10,xs:12,children:Object(r.jsx)(q,{config:V,generator:W,theme:z})}),Object(r.jsx)(j.a,{lg:2,md:1,xs:0})]})})]})}}]),n}(i.a.Component);o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(L,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.60fe102c.chunk.js.map