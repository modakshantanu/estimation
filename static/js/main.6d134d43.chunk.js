(this.webpackJsonpestimation=this.webpackJsonpestimation||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n.n(a),s=n(15),o=n.n(s),c=(n(21),n(3)),h=n(6),l=n(8),u=n(7),p=n(29),d=n(30),m=n(31);n(22);function v(e,t){return e<t?e/t:t/e}var j=function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;Object(c.a)(this,e),this.expression=void 0,this.answer=void 0,this.timelimit=void 0,this.id=void 0,this.scorer=void 0,this.expression=t,this.answer=n,this.id=Math.random(),this.scorer=function(e){return a(e,r.answer)},this.timelimit=i};function g(e,t){return e*Math.pow(2,(r=t,(n=-t)+Math.random()*(r-n)));var n,r}function y(e){for(var t,n,r=e.numOperands,a=e.rangeCenter,i=e.rangeVariance,s=e.operandVariance,o=(t=r.low,n=r.high,t+Math.floor(Math.random()*(n-t+.99999))),c=g(a,i),h=[],l=0;l<o;l++){var u=g(Math.pow(c,1/(o-l)),s);h.push(Math.round(u)),c/=u}h.sort((function(e,t){return e-t})),c=h.reduce((function(e,t){return e*t}));var p="";return h.forEach((function(e){p+="".concat(e," \xd7 ")})),p=p.slice(0,-3),new j(p,c,(function(e,t){var n=e<t?e/t:t/e;return Math.round(100*n)}),15e3)}var O,b=n(10),f=n(32),S=n(33);!function(e){e[e.PREGAME=0]="PREGAME",e[e.INTRO=1]="INTRO",e[e.RUNNING=2]="RUNNING",e[e.PAUSED=3]="PAUSED",e[e.OUTRO=4]="OUTRO",e[e.POSTGAME=5]="POSTGAME"}(O||(O={}));var x,N={numOperands:{low:2,high:2},rangeCenter:2e4,rangeVariance:2,operandVariance:2},E=function e(){Object(c.a)(this,e),this.generator=y,this.questionArray=[],this.currentQuestion=void 0,this.category="Multiplication (Easy)",this.numQuestions=5,this.currentIndex=0,this.recentScore=0,this.totalScore=0,this.recentGuess=0,this.recentAnswer=0,this.progressState=O.PREGAME,this.generatorconfig=N,this.totalTime=0,this.timeRemaining=0};function I(e){e.currentIndex=0,e.recentAnswer=e.recentGuess=e.recentScore=e.totalScore=0,e.questionArray=[];for(var t=0;t<e.numQuestions;t++)e.questionArray.push(e.generator(e.generatorconfig));return e.currentQuestion=e.questionArray[0],e.totalTime=e.currentQuestion.timelimit,e.timeRemaining=e.totalTime,e}!function(e){e[e.BUTTON=0]="BUTTON",e[e.ANSWER=1]="ANSWER",e[e.ANIM=2]="ANIM"}(x||(x={}));var T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).inputField=void 0,r.canvasRef=void 0,r.timerInterval=void 0,r.questionId=0,r.timeLimit=0,r.startTime=0,r.handleKeyDown=function(e){if("Enter"===e.key&&r.props.gameState.progressState===O.RUNNING){var t;try{t=parseFloat(r.state.text)}catch(n){return}if(isNaN(t))return;r.props.inputHandler({type:x.ANSWER,payload:t}),r.setState({text:""}),r.props.gameState.currentIndex,r.props.gameState.numQuestions}else"Enter"===e.key&&r.props.gameState.progressState===O.POSTGAME&&r.props.inputHandler({type:x.BUTTON,payload:"replay"})},r.state={text:""},r.inputField=i.a.createRef(),r.canvasRef=i.a.createRef(),r.drawArc=r.drawArc.bind(Object(b.a)(r)),r.handleChange=r.handleChange.bind(Object(b.a)(r)),r}return Object(h.a)(n,[{key:"drawArc",value:function(e){if(null!==this.canvasRef.current){var t=this.canvasRef.current,n=this.canvasRef.current.getContext("2d");n.strokeStyle=e<.75?"green":"red",n.fillStyle=this.props.theme.background,n.fillRect(0,0,48,48),n.lineWidth=3,n.translate(-.5,-.5);var r=t.width/2,a=t.height/2;n.beginPath(),n.arc(r,a,16,2*Math.PI*e-Math.PI/2,-Math.PI/2),n.stroke(),n.translate(.5,.5)}}},{key:"componentDidMount",value:function(){var e;this.handleChange=this.handleChange.bind(this),null===(e=this.inputField.current)||void 0===e||e.focus()}},{key:"render",value:function(){var e=this,t={background:this.props.theme.background,color:this.props.theme.textColor},n=this.props.gameState.progressState,a=this.props.gameState.currentQuestion;void 0!==a&&a.id!==this.questionId&&(this.timerInterval&&clearInterval(this.timerInterval),this.questionId=a.id,this.timeLimit=a.timelimit,this.startTime=Date.now(),0!==this.timeLimit&&(this.timerInterval=setInterval((function(){e.props.gameState.progressState===O.PAUSED&&(e.startTime+=16.67);var t=(Date.now()-e.startTime)/e.timeLimit;t<1?e.drawArc(t):(e.timerInterval&&clearInterval(e.timerInterval),e.props.inputHandler({type:x.ANSWER,payload:1}))}),16.67)),this.forceUpdate());var i=(null===a||void 0===a?void 0:a.timelimit)||0,s=this.props.gameState,o="";return n===O.RUNNING?o="Enter Answer":n===O.PAUSED&&(o="Game Paused"),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(r.jsx)(f.a,{size:"lg",style:t,children:Object(r.jsx)(S.a,{onKeyDown:this.handleKeyDown,style:t,value:this.state.text,onChange:this.handleChange,placeholder:o,ref:this.inputField})}),0!==i&&s.progressState===O.RUNNING&&Object(r.jsx)("canvas",{ref:this.canvasRef,width:48,height:48})]})}},{key:"handleChange",value:function(e){if(this.props.gameState.progressState===O.RUNNING){var t=e.target.value,n=t.slice(-1);(0===t.length||n>="0"&&n<="9"||"e"===n||"-"===n||"+"===n||"."===n)&&this.setState({text:t})}}}]),n}(i.a.Component),w=n(11),A={fontSize:45,textAlign:"center",minHeight:100},R={fontSize:30,textAlign:"center",minHeight:100,padding:15},k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e,t=this.props.gameState.progressState;return t===O.PAUSED?Object(r.jsx)("div",{style:Object(w.a)(Object(w.a)({},A),{},{fontFamily:this.props.theme.questionFont}),children:"---Paused---"}):t===O.POSTGAME?Object(r.jsx)("div",{style:Object(w.a)(Object(w.a)({},R),{},{fontFamily:this.props.theme.questionFont}),children:"Final Score: ".concat(this.props.gameState.totalScore)}):Object(r.jsx)("div",{style:Object(w.a)(Object(w.a)({},A),{},{fontFamily:this.props.theme.questionFont}),children:(null===(e=this.props.question)||void 0===e?void 0:e.expression)||"---"})}}]),n}(i.a.Component),M=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.recentGuess,n=e.recentAnswer,a="",i=Math.abs(Math.log10(n)-Math.log10(t));i=Math.pow(10,i),isNaN(i)&&(i=1),i<1.5?a="Error: ".concat((i=100*(i-1)).toFixed(2)," %"):(i=Math.log10(i),a="Error (log\u2081\u2080): ".concat(i.toFixed(2)));var s=window.innerWidth<576?{}:{float:"right"};return Object(r.jsx)("div",{children:Object(r.jsx)(p.a,{children:Object(r.jsxs)(d.a,{children:[Object(r.jsxs)(m.a,{xs:12,sm:4,children:[Object(r.jsx)("span",{children:"Score: ".concat(this.props.totalScore," ")}),Object(r.jsx)("span",{children:"(+".concat(this.props.recentScore,")")})]}),Object(r.jsx)(m.a,{xs:12,sm:8,children:Object(r.jsxs)("div",{style:s,children:[Object(r.jsx)("div",{children:"Guess: ".concat(G(t),", Answer: ").concat(G(n))}),Object(r.jsx)("div",{children:a})]})})]})})})}}]),n}(i.a.Component),U="\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079\u207b";function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;if(0!==e&&(e<n||e>t)){for(var r=Math.floor(Math.log10(e)),a=e/Math.pow(10,r),i=r.toString(),s="",o=0;o<i.length;o++)"-"===i[o]?s+=U[10]:s+=U[parseInt(i[o])];return"".concat(a.toFixed(3),"\xd710").concat(s)}return e.toString()}var C=M,P=n(34),F=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.theme,n=e.gameState,a=e.inputHandler,i={fontFamily:t.headerFont,fontSize:"24px",marginTop:"12px"},s="(".concat(n.currentIndex+1,"/").concat(n.numQuestions,")"),o=Object(r.jsx)(P.a,{variant:"success",style:{float:"right",fontFamily:t.bodyFont},onClick:function(){a({type:x.BUTTON,payload:"start"})},children:"Start\u21b5"}),c=Object(r.jsx)(P.a,{variant:"success",style:{float:"right",fontFamily:t.bodyFont},onClick:function(){a({type:x.BUTTON,payload:"replay"})},children:"Replay\u21b5"});return Object(r.jsxs)("div",{style:i,children:[Object(r.jsx)("span",{children:n.category}),n.progressState===O.PREGAME?o:n.progressState===O.POSTGAME?c:Object(r.jsx)("span",{style:{float:"right"},children:s}),Object(r.jsx)("hr",{style:{borderColor:t.textColor}})]})}}]),n}(i.a.Component),D={marginRight:4},q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).pauseEvent=r.pauseEvent.bind(Object(b.a)(r)),r.resetEvent=r.resetEvent.bind(Object(b.a)(r)),r}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.gameState.progressState,t=e===O.PAUSED,n=[Object(r.jsxs)(P.a,{variant:"primary",style:D,onClick:this.pauseEvent,children:[Object(r.jsx)("u",{children:"P"}),t?"lay":"ause"]},1),Object(r.jsxs)(P.a,{variant:"warning",style:D,onClick:this.resetEvent,children:[Object(r.jsx)("u",{children:"R"}),"eset"]},2)];return Object(r.jsx)("div",{children:e===O.POSTGAME?[]:n})}},{key:"pauseEvent",value:function(){this.props.inputHandler({type:x.BUTTON,payload:"playpause"})}},{key:"resetEvent",value:function(){this.props.inputHandler({type:x.BUTTON,payload:"reset"})}}]),n}(i.a.Component),H=0;var Q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).prevTimestamp=0,r.state={gameState:new E},r.handleInput=r.handleInput.bind(Object(b.a)(r)),r}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.handleInput=this.handleInput.bind(this),this.keyCapture=this.keyCapture.bind(this),document.body.addEventListener("keydown",this.keyCapture)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.keyCapture)}},{key:"render",value:function(){var e=this.state.gameState;return Object(r.jsxs)("div",{children:[Object(r.jsx)(F,{theme:this.props.theme,gameState:e,inputHandler:this.handleInput}),Object(r.jsx)(k,{question:e.currentQuestion,theme:this.props.theme,gameState:e}),Object(r.jsx)(T,{inputHandler:this.handleInput,theme:this.props.theme,gameState:e}),Object(r.jsx)(C,{recentScore:e.recentScore,totalScore:e.totalScore,recentGuess:e.recentGuess,recentAnswer:e.recentAnswer}),Object(r.jsx)(q,{inputHandler:this.handleInput,gameState:e})]})}},{key:"handleInput",value:function(e){var t=function(e,t,n){var r=e;if(e.progressState===O.PREGAME)t.type===x.BUTTON&&"start"===t.payload&&((r=I(e)).progressState=O.RUNNING);else if(e.progressState===O.RUNNING){if(t.type===x.BUTTON)"reset"===t.payload?(r=I(e)).progressState=O.RUNNING:"playpause"===t.payload&&(r.progressState=O.PAUSED);else if(t.type===x.ANSWER){var a,i,s=null===(a=e.currentQuestion)||void 0===a?void 0:a.scorer(t.payload);r.totalScore+=s||0,r.recentGuess=t.payload,r.recentAnswer=(null===(i=e.currentQuestion)||void 0===i?void 0:i.answer)||-1,r.recentScore=s||0,r.currentIndex++,r.currentIndex<r.numQuestions?(r.currentQuestion=r.questionArray[r.currentIndex],r.totalTime=r.currentQuestion.timelimit,r.timeRemaining=r.totalTime):r.progressState=O.POSTGAME}}else e.progressState===O.PAUSED?t.type===x.BUTTON&&"playpause"===t.payload?r.progressState=O.RUNNING:"reset"===t.payload&&((r=I(e)).progressState=O.RUNNING):e.progressState===O.POSTGAME&&t.type===x.BUTTON&&"replay"===t.payload&&((r=I(e)).progressState=O.RUNNING);return r}(this.state.gameState,e,this.handleInput);this.setState({gameState:t})}},{key:"keyCapture",value:function(e){var t=function(e,t){if(!(e.timeStamp-H<.1)){H=e.timeStamp;var n={type:x.BUTTON,payload:""};if("KeyR"===e.code)return n.payload="reset",n;if("KeyP"===e.code)return n.payload="playpause",n;if("Enter"===e.code){if(t.progressState===O.PREGAME)return n.payload="start",n;if(t.progressState===O.RUNNING)return}}}(e,this.state.gameState);void 0!==t&&this.handleInput(t)}}]),n}(i.a.Component),B=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e={background:this.props.theme.primary,width:"100%",textAlign:"center",fontFamily:this.props.theme.headerFont,fontSize:"30px",color:this.props.theme.textColor};return Object(r.jsx)("div",{style:e,children:"The Estimation Game"})}}]),n}(i.a.Component),W=y,L={background:"#222831",primary:"#30475e",secondary:"#ffa41b",textColor:"#eeeeee",questionFont:"Roboto Mono",headerFont:"Concert One",bodyFont:"Noto Sans"},z={numOperands:{low:2,high:2},rangeCenter:2e4,rangeVariance:2,operandVariance:2},V={background:L.background,minHeight:"100vh",color:L.textColor,fontFamily:L.bodyFont},K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).setState({width:window.innerWidth,height:window.innerHeight}),window.addEventListener("resize",(function(e){r.setState({height:e.currentTarget.innerHeight,width:e.currentTarget.innerWidth})})),r}return Object(h.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{style:V,children:[Object(r.jsx)(B,{theme:L}),Object(r.jsx)(p.a,{children:Object(r.jsxs)(d.a,{children:[Object(r.jsx)(m.a,{lg:2,md:1,xs:0}),Object(r.jsx)(m.a,{lg:8,md:10,xs:12,children:Object(r.jsx)(Q,{config:z,generator:W,theme:L})}),Object(r.jsx)(m.a,{lg:2,md:1,xs:0})]})})]})}}]),n}(i.a.Component);o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.6d134d43.chunk.js.map